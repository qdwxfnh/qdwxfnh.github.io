
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="詹纬个人知识树">
      
      
        <meta name="author" content="詹纬">
      
      
      
        <link rel="prev" href="../%E7%AC%AC%E4%B8%80%E7%AB%A0%20JavaScript%20%E7%AE%80%E4%BB%8B/">
      
      
        <link rel="next" href="../../JavaScript%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/%E5%88%9D%E7%BA%A7%E7%89%87%E6%AE%B5/">
      
      <link rel="icon" href="../../../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.1.21">
    
    
      
        <title>第二章 JavaScript 基础知识 - 詹纬知识树</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.eebd395e.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#hello-world" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="詹纬知识树" class="md-header__button md-logo" aria-label="詹纬知识树" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 89 89">
  <path d="M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z" />
  <path d="M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z" style="fill-opacity: 0.5" />
  <path d="M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z" />
  <path d="M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z" style="fill-opacity: 0.25" />
</svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            詹纬知识树
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              第二章 JavaScript 基础知识
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../.." class="md-tabs__link">
      精选
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    

  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%EF%BC%88%E7%AC%AC4%E7%89%88%EF%BC%89/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E4%BB%80%E4%B9%88%E6%98%AF%20JavaScript/" class="md-tabs__link md-tabs__link--active">
        编程
      </a>
    </li>
  

  

  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="詹纬知识树" class="md-nav__button md-logo" aria-label="詹纬知识树" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 89 89">
  <path d="M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z" />
  <path d="M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z" style="fill-opacity: 0.5" />
  <path d="M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z" />
  <path d="M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z" style="fill-opacity: 0.25" />
</svg>

    </a>
    詹纬知识树
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        精选
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          编程
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          编程
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" checked>
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
          javascript
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          javascript
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_1" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_1_1" id="__nav_2_1_1_label" tabindex="0">
          《JavaScript高级程序设计（第4版）》读书笔记
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1_1">
          <span class="md-nav__icon md-icon"></span>
          《JavaScript高级程序设计（第4版）》读书笔记
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%EF%BC%88%E7%AC%AC4%E7%89%88%EF%BC%89/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E4%BB%80%E4%B9%88%E6%98%AF%20JavaScript/" class="md-nav__link">
        第一章 什么是 JavaScript
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%EF%BC%88%E7%AC%AC4%E7%89%88%EF%BC%89/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20HTML%20%E4%B8%AD%E7%9A%84%20JavaScript/" class="md-nav__link">
        第二章 HTML 中的 JavaScript
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_2" checked>
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_1_2" id="__nav_2_1_2_label" tabindex="0">
          《现代JavaScript教程》读书笔记
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2_1_2">
          <span class="md-nav__icon md-icon"></span>
          《现代JavaScript教程》读书笔记
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%AC%AC%E4%B8%80%E7%AB%A0%20JavaScript%20%E7%AE%80%E4%BB%8B/" class="md-nav__link">
        第一章 JavaScript 简介
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          第二章 JavaScript 基础知识
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        第二章 JavaScript 基础知识
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#hello-world" class="md-nav__link">
    Hello, world!
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#markup" class="md-nav__link">
    现代的标记（markup）
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    代码结构
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-strict" class="md-nav__link">
    现代模式，"use strict"
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-strict_1" class="md-nav__link">
    "use strict"
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    浏览器控制台
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-strict_2" class="md-nav__link">
    我们应该使用 "use strict" 吗？
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    变量
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    数据类型
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#typeof" class="md-nav__link">
    typeof 运算符
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alertprompt-confirm" class="md-nav__link">
    交互：alert、prompt 和 confirm
  </a>
  
    <nav class="md-nav" aria-label="交互：alert、prompt 和 confirm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#alert" class="md-nav__link">
    alert
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt" class="md-nav__link">
    prompt
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#confirm" class="md-nav__link">
    confirm
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    类型转换
  </a>
  
    <nav class="md-nav" aria-label="类型转换">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    字符串转换
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    数字型转换
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    布尔型转换
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    基础运算符，数学运算
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    数字转化，一元运算符 +
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    赋值 = 返回一个值
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    自增/自减
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    逗号运算符
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    字符串比较
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    不同类型间的比较
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    严格相等
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#null-undefined" class="md-nav__link">
    对 null 和 undefined 进行比较
  </a>
  
    <nav class="md-nav" aria-label="对 null 和 undefined 进行比较">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#null-vs-0" class="md-nav__link">
    奇怪的结果：null vs 0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#undefined" class="md-nav__link">
    特立独行的 undefined
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    条件运算符 '?'
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    或运算寻找第一个真值
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    与运算寻找第一个假值
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    !（非）
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    空值合并运算符 '??'
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    与 || 比较
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    优先级
  </a>
  
    <nav class="md-nav" aria-label="优先级">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    ?? 与 &amp;&amp; 或 || 一起使用
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    循环
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#breakcontinue" class="md-nav__link">
    break/continue 标签
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#switch" class="md-nav__link">
    "switch" 语句
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_3" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_1_3" id="__nav_2_1_3_label" tabindex="0">
          JavaScript代码片段
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1_3">
          <span class="md-nav__icon md-icon"></span>
          JavaScript代码片段
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaScript%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/%E5%88%9D%E7%BA%A7%E7%89%87%E6%AE%B5/" class="md-nav__link">
        入门级
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaScript%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/%E4%B8%AD%E7%BA%A7%E7%89%87%E6%AE%B5/" class="md-nav__link">
        中门级
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#hello-world" class="md-nav__link">
    Hello, world!
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#markup" class="md-nav__link">
    现代的标记（markup）
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    代码结构
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-strict" class="md-nav__link">
    现代模式，"use strict"
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-strict_1" class="md-nav__link">
    "use strict"
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    浏览器控制台
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-strict_2" class="md-nav__link">
    我们应该使用 "use strict" 吗？
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    变量
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    数据类型
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#typeof" class="md-nav__link">
    typeof 运算符
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alertprompt-confirm" class="md-nav__link">
    交互：alert、prompt 和 confirm
  </a>
  
    <nav class="md-nav" aria-label="交互：alert、prompt 和 confirm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#alert" class="md-nav__link">
    alert
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt" class="md-nav__link">
    prompt
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#confirm" class="md-nav__link">
    confirm
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    类型转换
  </a>
  
    <nav class="md-nav" aria-label="类型转换">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    字符串转换
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    数字型转换
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    布尔型转换
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    基础运算符，数学运算
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    数字转化，一元运算符 +
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    赋值 = 返回一个值
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    自增/自减
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    逗号运算符
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    字符串比较
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    不同类型间的比较
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    严格相等
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#null-undefined" class="md-nav__link">
    对 null 和 undefined 进行比较
  </a>
  
    <nav class="md-nav" aria-label="对 null 和 undefined 进行比较">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#null-vs-0" class="md-nav__link">
    奇怪的结果：null vs 0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#undefined" class="md-nav__link">
    特立独行的 undefined
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    条件运算符 '?'
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    或运算寻找第一个真值
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    与运算寻找第一个假值
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    !（非）
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    空值合并运算符 '??'
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    与 || 比较
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    优先级
  </a>
  
    <nav class="md-nav" aria-label="优先级">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    ?? 与 &amp;&amp; 或 || 一起使用
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    循环
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#breakcontinue" class="md-nav__link">
    break/continue 标签
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#switch" class="md-nav__link">
    "switch" 语句
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>第二章 JavaScript 基础知识</h1>

<h2 id="hello-world">Hello, world!<a class="headerlink" href="#hello-world" title="Permanent link">&para;</a></h2>
<p>首先，让我们看看如何将脚本添加到网页上。对于服务器端环境（如 Node.js），你只需要使用诸如 <code>"node my.js"</code> 的命令行来执行它。</p>
<p>我们几乎可以使用 <code>&lt;script&gt;</code> 标签将 JavaScript 程序插入到 HTML 文档的任何位置。</p>
<h2 id="markup">现代的标记（markup）<a class="headerlink" href="#markup" title="Permanent link">&para;</a></h2>
<p><code>&lt;script&gt;</code> 标签有一些现在很少用到的特性（attribute），但是我们可以在老代码中找到它们：</p>
<dl>
<dt><code>type</code> 特性：<code>&lt;script <u>type</u>=...&gt;</code></dt>
<dd>在老的 HTML4 标准中，要求 script 标签有 <code>type</code> 特性。通常是 <code>type="text/javascript"</code>。这样的特性声明现在已经不再需要。而且，现代 HTML 标准已经完全改变了此特性的含义。现在，它可以用于 JavaScript 模块。</dd>
<dt><code>language</code> 特性：<code>&lt;script <u>language</u>=...&gt;</code></dt>
<dd>这个特性是为了显示脚本使用的语言。这个特性现在已经没有任何意义，因为语言默认就是 JavaScript。不再需要使用它了。</dd>
<dt>脚本前后的注释。</dt>
<dd>
<p>在非常古老的书籍和指南中，你可能会在 <code>&lt;script&gt;</code> 标签里面找到注释，就像这样：</p>
<div class="language-html highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span><span class="c">&lt;!--</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span><span class="p">...</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="c1">//--&gt;</span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></code></pre></div>
<p>现代 JavaScript 中已经不这样使用了。这些注释是用于不支持 <code>&lt;script&gt;</code> 标签的古老的浏览器隐藏 JavaScript 代码的。由于最近 15 年内发布的浏览器都没有这样的问题，因此这种注释能帮你辨认出一些老掉牙的代码。</p>
</dd>
</dl>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>一般来说，只有最简单的脚本才嵌入到 HTML 中。更复杂的脚本存放在单独的文件中。</p>
<p>使用独立文件的好处是浏览器会下载它，然后将它保存到浏览器的 <code>缓存</code> 中。</p>
<p>之后，其他页面想要相同的脚本就会从缓存中获取，而不是下载它。所以文件实际上只会下载一次。</p>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>如果设置了 <code>src</code> 特性，<code>script</code> 标签内容将会被忽略。</p>
<p>一个单独的 <code>&lt;script&gt;</code> 标签不能同时有 <code>src</code> 特性和内部包裹的代码。</p>
<p>这将不会工作：</p>
<div class="language-html highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;file.js&quot;</span><span class="p">&gt;</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// 此内容会被忽略，因为设定了 src</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></code></pre></div>
<p>我们必须进行选择，要么使用外部的 <code>&lt;script src="…"&gt;</code>，要么使用正常包裹代码的 <code>&lt;script&gt;</code>。</p>
<p>为了让上面的例子工作，我们可以将它分成两个 <code>&lt;script&gt;</code> 标签。</p>
<div class="language-html highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;file.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></code></pre></div>
</div>
<h2 id="_1">代码结构<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>在 JavaScript 中换行符理解成“隐式”的分号。这也被称为 <code>自动分号插入</code>。</p>
<p><strong>在大多数情况下，换行意味着一个分号。但是“大多数情况”并不意味着“总是”！</strong></p>
<p>有很多换行并不是分号的例子，例如：</p>
<p><div class="language-js highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nx">alert</span><span class="p">(</span><span class="mf">3</span><span class="w"> </span><span class="o">+</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="mf">1</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="o">+</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span>
</span></code></pre></div>
显而易见的是，如果一行以加号 <code>"+"</code> 结尾，那么这是一个“不完整的表达式”，不需要分号。所以，这个例子得到了预期的结果。</p>
<p><strong>但存在 JavaScript 无法确定是否真的需要自动插入分号的情况。</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">添加了分号</label><label for="__tabbed_1_2">未添加分号</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><div class="language-js highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="hll"><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">);</span>
</span></span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">].</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">alert</span><span class="p">);</span>
</span></code></pre></div>
运行结果：先显示 Hello，然后显示 1，然后 2。</p>
</div>
<div class="tabbed-block">
<div class="language-js highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="hll"><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">)</span>
</span></span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">].</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">alert</span><span class="p">);</span>
</span></code></pre></div>
<p>运行结果：只有第一个 <code>Hello</code> 会被显示出来（并且有一个报错，你可能需要打开控制台才能看到它）。并且不会再有数字被显示出来。</p>
<p>这是因为，JavaScript 引擎并没有假设在方括号 <code>[...]</code> 前有一个分号。因此，最后一个示例中的代码被视为了单个语句。</p>
<p>对于引擎来说，它是这样的：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">)[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">].</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">alert</span><span class="p">);</span>
</span></code></pre></div>
</div>
</div>
</div>
<h2 id="use-strict">现代模式，"use strict"<a class="headerlink" href="#use-strict" title="Permanent link">&para;</a></h2>
<p>长久以来，JavaScript 不断向前发展且并未带来任何兼容性问题。新的特性被加入，旧的功能也没有改变。</p>
<p>这么做有利于兼容旧代码，但缺点是 JavaScript 创造者的任何错误或不完善的决定也将永远被保留在 JavaScript 语言中。</p>
<p>这种情况一直持续到 2009 年 ECMAScript 5 (ES5) 的出现。ES5 规范增加了新的语言特性并且修改了一些已经存在的特性。为了保证旧的功能能够使用，大部分的修改是默认不生效的。你需要一个特殊的指令 —— <code>"use strict"</code> 来明确地激活这些特性。</p>
<h2 id="use-strict_1">"use strict"<a class="headerlink" href="#use-strict_1" title="Permanent link">&para;</a></h2>
<p>这个指令看上去像一个字符串 <code>"use strict"</code>。当它处于脚本文件的顶部时，则整个脚本文件都将以“现代”模式进行工作。</p>
<p>比如：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="s2">&quot;use strict&quot;</span><span class="p">;</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="c1">// 代码以现代模式工作</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="p">...</span>
</span></code></pre></div>
<p>很快我们就会学习到函数（一种组合命令的方式），所以让我们提前注意一下，<code>"use strict"</code> 可以被放在函数体的开头。这样则可以只在该函数中启用严格模式。但通常人们会在整个脚本中启用严格模式。</p>
<div class="admonition warning">
<p class="admonition-title">确保 'use strict' 出现在最顶部</p>
<p>请确保 <code>"use strict"</code> 出现在脚本的最顶部，否则严格模式可能无法启用。</p>
<p>这里的严格模式就没有被启用：</p>
<p>```js no-strict
alert("some code");
// 下面的 "use strict" 会被忽略，必须在最顶部。</p>
<p>"use strict";</p>
<p>// 严格模式没有被激活
```</p>
<p>只有注释可以出现在 <code>"use strict"</code> 的上面。</p>
</div>
<div class="admonition info">
<p class="admonition-title">没有办法取消 <code>use strict</code></p>
<p>没有类似于 <code>"no use strict"</code> 这样的指令可以使程序返回默认模式。</p>
<p>一旦进入了严格模式，就没有回头路了。</p>
</div>
<h2 id="_2">浏览器控制台<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>当你使用 <code>开发者控制台</code> 运行代码时，请注意它默认是不启动 <code>use strict</code> 的。</p>
<p>首先，你可以尝试搭配使用 <code>key:Shift+Enter</code> 按键去输入多行代码，然后将 <code>use strict</code> 放在代码最顶部，就像这样：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="s1">&#39;use strict&#39;</span><span class="p">;</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">Shift</span><span class="o">+</span><span class="nx">Enter</span><span class="w"> </span><span class="nx">换行</span><span class="o">&gt;</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="c1">//  ...你的代码</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="o">&lt;</span><span class="nx">按下</span><span class="w"> </span><span class="nx">Enter</span><span class="w"> </span><span class="nx">以运行</span><span class="o">&gt;</span>
</span></code></pre></div>
<p>它在大部分浏览器中都有效，像 Firefox 和 Chrome。</p>
<p>如果依然不行，例如你使用的是旧版本的浏览器，那么有一种很丑但可靠的启用 <code>use strict</code> 的方法。将你的代码放在这样的包装器中：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="p">(</span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">  </span><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">  </span><span class="c1">// ...你的代码...</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="p">})()</span>
</span></code></pre></div>
<h2 id="use-strict_2">我们应该使用 "use strict" 吗？<a class="headerlink" href="#use-strict_2" title="Permanent link">&para;</a></h2>
<p>现代 JavaScript 支持 "class" 和 "module" —— 高级语言结构，它们会自动启用 <code>use strict</code>。因此，如果我们使用它们，则无需添加 <code>"use strict"</code> 指令。</p>
<p><strong>因此，目前我们欢迎将 <code>"use strict";</code> 写在脚本的顶部。稍后，当你的代码全都写在了 class 和 module 中时，你则可以将 <code>"use strict";</code> 这行代码省略掉。</strong></p>
<h2 id="_3">变量<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<div class="admonition warning">
<p class="admonition-title">声明两次会触发 error</p>
<p>一个变量应该只被声明一次。</p>
<p>对同一个变量进行重复声明会触发 error：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;This&quot;</span><span class="p">;</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="c1">// 重复 &#39;let&#39; 会导致 error</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="kd">let</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;That&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// SyntaxError: &#39;message&#39; has already been declared</span>
</span></code></pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">未采用 <code>use strict</code> 下的赋值</p>
<p>一般，我们需要在使用一个变量前定义它。但是在早期，我们可以不使用 <code>let</code> 进行变量声明，而可以简单地通过赋值来创建一个变量。现在如果我们不在脚本中使用 <code>use strict</code> 声明启用严格模式，这仍然可以正常工作，这是为了保持对旧脚本的兼容。</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1">// 注意：这个例子中没有 &quot;use strict&quot;</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="nx">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span><span class="w"> </span><span class="c1">// 如果变量 &quot;num&quot; 不存在，就会被创建</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="nx">alert</span><span class="p">(</span><span class="nx">num</span><span class="p">);</span><span class="w"> </span><span class="c1">// 5</span>
</span></code></pre></div>
<p>上面这是个糟糕的做法，严格模式下会报错。</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="s2">&quot;use strict&quot;</span><span class="p">;</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="nx">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span><span class="w"> </span><span class="c1">// 错误：num 未定义</span>
</span></code></pre></div>
</div>
<div class="admonition info">
<p class="admonition-title">声明一个常数（不变）变量，可以使用 <code>const</code> 而非 <code>let</code></p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">myBirthday</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;18.04.1982&#39;</span><span class="p">;</span>
</span></code></pre></div>
<p>使用 <code>const</code> 声明的变量称为“常量”。它们不能被修改，如果你尝试修改就会发现报错：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">myBirthday</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;18.04.1982&#39;</span><span class="p">;</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="nx">myBirthday</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;01.01.2001&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// 错误，不能对常量重新赋值</span>
</span></code></pre></div>
<p>当能确定这个变量永远不会改变的时候，就可以使用 <code>const</code> 来确保这种行为，并且清楚地向别人传递这一事实。</p>
</div>
<div class="admonition info">
<p class="admonition-title">大写形式的常数</p>
<p>大写命名的常量仅用作“硬编码（hard-coded）”值的别名。</p>
</div>
<h2 id="_4">数据类型<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<div class="admonition info">
<p class="admonition-title">数学运算是安全的</p>
<p>在 JavaScript 中做数学运算是安全的。我们可以做任何事：除以 0，将非数字字符串视为数字，等等。</p>
<p>脚本永远不会因为一个致命的错误（“死亡”）而停止。最坏的情况下，我们会得到 <code>NaN</code> 的结果。</p>
</div>
<p><code>BigInt</code> 类型是最近被添加到 JavaScript 语言中的，用于表示任意长度的整数。</p>
<p>可以通过将 <code>n</code> 附加到整数字段的末尾来创建 <code>BigInt</code> 值。</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="c1">// 尾部的 &quot;n&quot; 表示这是一个 BigInt 类型</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">bigInt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1234567890123456789012345678901234567890n</span><span class="p">;</span>
</span></code></pre></div>
<div class="admonition info">
<p class="admonition-title">兼容性问题</p>
<p>目前 Firefox/Chrome/Edge/Safari 已经支持 <code>BigInt</code> 了，但 IE 还没有。</p>
<p>你可以查看 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt#Browser_compatibility"><em>MDN</em> BigInt 兼容性表</a> 以了解哪些版本的浏览器已经支持 BigInt 了。</p>
</div>
<p>反引号是 <strong>功能扩展</strong> 引号。它们允许我们通过将变量和表达式包装在 <code>${…}</code> 中，来将它们嵌入到字符串中。例如：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;John&quot;</span><span class="p">;</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="c1">// 嵌入一个变量</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="sb">`Hello, *!*</span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb">*/!*!`</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// Hello, John!</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="c1">// 嵌入一个表达式</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="sb">`the result is *!*</span><span class="si">${</span><span class="mf">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">2</span><span class="si">}</span><span class="sb">*/!*`</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// the result is 3</span>
</span></code></pre></div>
<p><code>${…}</code> 内的表达式会被计算，计算结果会成为字符串的一部分。可以在 <code>${…}</code> 内放置任何东西：诸如名为 <code>name</code> 的变量，或者诸如 <code>1 + 2</code> 的算数表达式，或者其他一些更复杂的。</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>需要注意的是，这仅仅在反引号内有效，其他引号不允许这种嵌入。
<div class="language-js highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="s2">&quot;the result is ${1 + 2}&quot;</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// the result is ${1 + 2}（使用双引号则不会计算 ${…} 中的内容）</span>
</span></code></pre></div></p>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>相比较于其他编程语言，JavaScript 中的 <code>null</code> 不是一个“对不存在的 <code>object</code> 的引用”或者 “null 指针”。</p>
<p>JavaScript 中的 <code>null</code> 仅仅是一个代表“无”、“空”或“值未知”的特殊值。</p>
</div>
<h2 id="typeof">typeof 运算符<a class="headerlink" href="#typeof" title="Permanent link">&para;</a></h2>
<p><code>typeof</code> 运算符返回参数的类型。当我们想要分别处理不同类型值的时候，或者想快速进行数据类型检验时，非常有用。</p>
<p>对 <code>typeof x</code> 的调用会以字符串的形式返回数据类型：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="ow">typeof</span><span class="w"> </span><span class="kc">undefined</span><span class="w"> </span><span class="c1">// &quot;undefined&quot;</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="ow">typeof</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="c1">// &quot;number&quot;</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="ow">typeof</span><span class="w"> </span><span class="mi">10n</span><span class="w"> </span><span class="c1">// &quot;bigint&quot;</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="ow">typeof</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c1">// &quot;boolean&quot;</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="ow">typeof</span><span class="w"> </span><span class="s2">&quot;foo&quot;</span><span class="w"> </span><span class="c1">// &quot;string&quot;</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="ow">typeof</span><span class="w"> </span><span class="nb">Symbol</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// &quot;symbol&quot;</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="ow">typeof</span><span class="w"> </span><span class="nb">Math</span><span class="w"> </span><span class="c1">// &quot;object&quot;  (1)</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="ow">typeof</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="c1">// &quot;object&quot;  (2)</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="ow">typeof</span><span class="w"> </span><span class="nx">alert</span><span class="w"> </span><span class="c1">// &quot;function&quot;  (3)</span>
</span></code></pre></div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<ul>
<li>
<p><code>typeof null</code> 的结果为 <code>"object"</code>。这是官方承认的 <code>typeof</code> 的错误，这个问题来自于 JavaScript 语言的早期阶段，并为了兼容性而保留了下来。<code>null</code> 绝对不是一个 <code>object</code>。<code>null</code> 有自己的类型，它是一个特殊值。<code>typeof</code> 的行为在这里是错误的。</p>
</li>
<li>
<p><code>typeof alert</code> 的结果是 <code>"function"</code>，因为 <code>alert</code> 在 JavaScript 语言中是一个函数。在 JavaScript 语言中没有一个特别的 "function" 类型。函数隶属于 <code>object</code> 类型。但是 <code>typeof</code> 会对函数区分对待，并返回 <code>"function"</code>。这也是来自于 JavaScript 语言早期的问题。从技术上讲，这种行为是不正确的，但在实际编程中却非常方便。</p>
</li>
<li>
<p>你可能还会遇到另一种语法：<code>typeof(x)</code>。它与 <code>typeof x</code> 相同。
  简单点说：<code>typeof</code> 是一个操作符，不是一个函数。这里的括号不是 <code>typeof</code> 的一部分。它是数学运算分组的括号。</p>
</li>
</ul>
</div>
<h2 id="alertprompt-confirm">交互：alert、prompt 和 confirm<a class="headerlink" href="#alertprompt-confirm" title="Permanent link">&para;</a></h2>
<p>在浏览器中，与用户交互的函数：<code>alert</code>，<code>prompt</code> 和<code>confirm</code>。</p>
<h3 id="alert">alert<a class="headerlink" href="#alert" title="Permanent link">&para;</a></h3>
<p>它会显示一条信息，并等待用户按下 "OK"。</p>
<p>例如：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">);</span>
</span></code></pre></div>
<p>弹出的这个带有信息的小窗口被称为 <strong>模态窗</strong>。"modal" 意味着用户不能与页面的其他部分（例如点击其他按钮等）进行交互，直到他们处理完窗口。在上面示例这种情况下 —— 直到用户点击“确定”按钮。</p>
<h3 id="prompt">prompt<a class="headerlink" href="#prompt" title="Permanent link">&para;</a></h3>
<p><code>prompt</code> 函数接收两个参数：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prompt</span><span class="p">(</span><span class="nx">title</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="k">default</span><span class="p">]);</span>
</span></code></pre></div>
<p>浏览器会显示一个带有文本消息的模态窗口，还有 input 框和确定/取消按钮。</p>
<dl>
<dt><code>title</code></dt>
<dd>显示给用户的文本</dd>
<dt><code>default</code></dt>
<dd>可选的第二个参数，指定 input 框的初始值。</dd>
</dl>
<p>访问者可以在提示输入栏中输入一些内容，然后按“确定”键。然后我们在 <code>result</code> 中获取该文本。或者他们可以按取消键或按 <code>key:Esc</code> 键取消输入，然后我们得到 <code>null</code> 作为 <code>result</code>。</p>
<p><code>prompt</code> 将返回用户在 <code>input</code> 框内输入的文本，如果用户取消了输入，则返回 <code>null</code>。</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prompt</span><span class="p">(</span><span class="s1">&#39;How old are you?&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">100</span><span class="p">);</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="nx">alert</span><span class="p">(</span><span class="sb">`You are </span><span class="si">${</span><span class="nx">age</span><span class="si">}</span><span class="sb"> years old!`</span><span class="p">);</span><span class="w"> </span><span class="c1">// You are 100 years old!</span>
</span></code></pre></div>
<h3 id="confirm">confirm<a class="headerlink" href="#confirm" title="Permanent link">&para;</a></h3>
<p>语法：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">confirm</span><span class="p">(</span><span class="nx">question</span><span class="p">);</span>
</span></code></pre></div>
<p><code>confirm</code> 函数显示一个带有 <code>question</code> 以及确定和取消两个按钮的模态窗口。</p>
<p>点击确定返回 <code>true</code>，点击取消返回 <code>false</code>。</p>
<p>例如：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">isBoss</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">confirm</span><span class="p">(</span><span class="s2">&quot;Are you the boss?&quot;</span><span class="p">);</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nx">isBoss</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// 如果“确定”按钮被按下，则显示 true</span>
</span></code></pre></div>
<p><code>alert</code>，<code>prompt``confirm</code> 这些方法都是模态的：它们暂停脚本的执行，并且不允许用户与该页面的其余部分进行交互，直到窗口被解除。</p>
<p>上述所有方法共有两个限制：</p>
<ol>
<li>
<p>模态窗口的确切位置由浏览器决定。通常在页面中心。</p>
</li>
<li>
<p>窗口的确切外观也取决于浏览器。我们不能修改它。</p>
</li>
</ol>
<p>这就是简单的代价。还有其他一些方式可以显示更漂亮的窗口，并与用户进行更丰富的交互，但如果“花里胡哨”不是非常重要，那使用这些方法也挺好。</p>
<h2 id="_5">类型转换<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<p>大多数情况下，运算符和函数会自动将赋予它们的值转换为正确的类型。</p>
<p>比如，<code>alert</code> 会自动将任何值都转换为字符串以进行显示。算术运算符会将值转换为数字。</p>
<p>在某些情况下，我们需要将值显式地转换为我们期望的类型。</p>
<h3 id="_6">字符串转换<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<p>当我们需要一个字符串形式的值时，就会进行字符串转换。</p>
<p>比如，<code>alert(value)</code> 将 <code>value</code> 转换为字符串类型，然后显示这个值。</p>
<p>我们也可以显式地调用 <code>String(value)</code> 来将 <code>value</code> 转换为字符串类型：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="nx">alert</span><span class="p">(</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">value</span><span class="p">);</span><span class="w"> </span><span class="c1">// boolean</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span><span class="w"> </span><span class="c1">// 现在，值是一个字符串形式的 &quot;true&quot;</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="nx">alert</span><span class="p">(</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">value</span><span class="p">);</span><span class="w"> </span><span class="c1">// string</span>
</span></code></pre></div>
<p>字符串转换最明显。<code>false</code> 变成 <code>"false"</code>，<code>null</code> 变成 <code>"null"</code> 等。</p>
<h3 id="_7">数字型转换<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>在算术函数和表达式中，会自动进行 number 类型转换。</p>
<p>比如，当把除法 <code>/</code> 用于非 number 类型：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="s2">&quot;6&quot;</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s2">&quot;2&quot;</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// 3, string 类型的值被自动转换成 number 类型后进行计算</span>
</span></code></pre></div>
<p>我们也可以使用 <code>Number(value)</code> 显式地将这个 <code>value</code> 转换为 number 类型。</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;123&quot;</span><span class="p">;</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="nx">alert</span><span class="p">(</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">str</span><span class="p">);</span><span class="w"> </span><span class="c1">// string</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="kd">let</span><span class="w"> </span><span class="nx">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Number</span><span class="p">(</span><span class="nx">str</span><span class="p">);</span><span class="w"> </span><span class="c1">// 变成 number 类型 123</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="nx">alert</span><span class="p">(</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">num</span><span class="p">);</span><span class="w"> </span><span class="c1">// number</span>
</span></code></pre></div>
<p>当我们从 string 类型源（如文本表单）中读取一个值，但期望输入一个数字时，通常需要进行显式转换。</p>
<p>如果该字符串不是一个有效的数字，转换的结果会是 <code>NaN</code>。例如：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Number</span><span class="p">(</span><span class="s2">&quot;an arbitrary string instead of a number&quot;</span><span class="p">);</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="nx">alert</span><span class="p">(</span><span class="nx">age</span><span class="p">);</span><span class="w"> </span><span class="c1">// NaN，转换失败</span>
</span></code></pre></div>
<p>number 类型转换规则：</p>
<table>
<thead>
<tr>
<th>值</th>
<th>转换</th>
</tr>
</thead>
<tbody>
<tr>
<td>undefined</td>
<td>NaN</td>
</tr>
<tr>
<td>null</td>
<td>0</td>
</tr>
<tr>
<td>true和false</td>
<td>1 and 0</td>
</tr>
<tr>
<td>string</td>
<td>去掉首尾空白字符（空格、换行符 <code>\n</code>、制表符 <code>\t</code> 等）后的纯数字字符串中含有的数字。如果剩余字符串为空，则转换结果为 <code>0</code>。否则，将会从剩余字符串中“读取”数字。当类型转换出现 error 时返回 <code>NaN</code>。</td>
</tr>
</tbody>
</table>
<p>例子：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nb">Number</span><span class="p">(</span><span class="s2">&quot;   123   &quot;</span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// 123</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nb">Number</span><span class="p">(</span><span class="s2">&quot;123z&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w">      </span><span class="c1">// NaN（从字符串“读取”数字，读到 &quot;z&quot; 时出现错误）</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nb">Number</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w">        </span><span class="c1">// 1</span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nb">Number</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w">       </span><span class="c1">// 0</span>
</span></code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>请注意 <code>null</code> 和 <code>undefined</code> 在这有点不同：<code>null</code> 变成数字 <code>0</code>，<code>undefined</code> 变成 <code>NaN</code>。</p>
</div>
<h3 id="_8">布尔型转换<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p>布尔（boolean）类型转换规则如下：</p>
<ul>
<li>直观上为“空”的值（如 <code>0</code>、空字符串、<code>null</code>、<code>undefined</code> 和 <code>NaN</code>）将变为 <code>false</code>。</li>
<li>其他值变成 <code>true</code>。</li>
</ul>
<p>比如：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nb">Boolean</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// true</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nb">Boolean</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// false</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nb">Boolean</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// true</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nb">Boolean</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// false</span>
</span></code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>包含 0 的字符串 "0" 是 <code>true</code></p>
<p>一些编程语言（比如 PHP）视 <code>"0"</code> 为 <code>false</code>。但在 JavaScript 中，非空的字符串总是 <code>true</code>。</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nb">Boolean</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// true</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nb">Boolean</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// 空格，也是 true（任何非空字符串都是 true）</span>
</span></code></pre></div>
</div>
<ul>
<li>数字 <code>0</code>、空字符串 <code>""</code>、<code>null</code>、<code>undefined</code> 和 <code>NaN</code> 都会被转换成 <code>false</code>。因为它们被称为“假值（falsy）”。</li>
<li>其他值被转换为 <code>true</code>，所以它们被称为“真值（truthy）”。</li>
</ul>
<h2 id="_9">基础运算符，数学运算<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>运算元</strong> —— <mark class="critic"> 运算符应用的对象 </mark>。比如说乘法运算 <code>5 * 2</code>，有两个运算元：左运算元 <code>5</code> 和右运算元 <code>2</code>。有时候人们也称其为“参数”而不是“运算元”。</li>
<li>如果一个运算符对应的只有一个运算元，那么它是 <strong>一元运算符</strong>。比如说一元负号运算符（unary negation）<code>-</code>，它的作用是对数字进行正负转换</li>
<li>如果一个运算符拥有两个运算元，那么它是 <strong>二元运算符</strong>。减号还存在二元运算符形式</li>
</ul>
<p>严格地说，使用一个相同的符号表征了两个不同的运算符：负号运算符，即反转符号的一元运算符，减法运算符，是从另一个数减去一个数的二元运算符。</p>
<h2 id="_10">数字转化，一元运算符 +<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h2>
<p>如果运算元不是数字，加号 <code>+</code> 则会将其转化为数字。</p>
<p>例如：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="c1">// 转化非数字</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="o">+</span><span class="kc">true</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// 1</span>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="o">+</span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="p">);</span><span class="w">   </span><span class="c1">// 0</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="o">*</span><span class="err">/!*</span>
</span></code></pre></div>
<p>它的效果和 <code>Number(...)</code> 相同，但是更加简短。</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">apples</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;2&quot;</span><span class="p">;</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="kd">let</span><span class="w"> </span><span class="nx">oranges</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;3&quot;</span><span class="p">;</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="c1">// 在二元运算符加号起作用之前，所有的值都被转化为了数字</span>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="o">+</span><span class="nx">apples</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">+</span><span class="nx">oranges</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// 5</span>
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a>
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>
</span><span id="__span-32-8"><a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a><span class="c1">// 更长的写法</span>
</span><span id="__span-32-9"><a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a><span class="c1">// alert( Number(apples) + Number(oranges) ); // 5</span>
</span></code></pre></div>
<h2 id="_11">赋值 = 返回一个值<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h2>
<p>语句 <code>x = value</code> 将值 <code>value</code> 写入 <code>x</code> <strong>然后返回 value</strong>。</p>
<p>下面是一个在复杂语句中使用赋值的例子：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="kd">let</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="kd">let</span><span class="w"> </span><span class="nx">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// 3</span>
</span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nx">c</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// 0</span>
</span></code></pre></div>
<p>上面这个例子，<code>(a = b + 1)</code> 的结果是赋给 <code>a</code> 的值（也就是 <code>3</code>）。然后该值被用于进一步的运算。</p>
<h2 id="_12">自增/自减<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h2>
<ul>
<li>当运算符置于变量后，被称为“后置形式”：<code>counter++</code>。</li>
<li>当运算符置于变量前，被称为“前置形式”：<code>++counter</code>。</li>
</ul>
<p>两者都做同一件事：将变量 <code>counter</code> 与 <code>1</code> 相加。</p>
<p>那么它们有区别吗？有，但只有当我们使用 <code>++/--</code> 的返回值时才能看到区别。</p>
<p>详细点说。我们知道，所有的运算符都有返回值。自增/自减也不例外。前置形式返回一个新的值，但后置返回原来的值（做加法/减法之前的值）。</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">自增减区别:后置形式</label><label for="__tabbed_2_2">自增减区别:后置形式</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">counter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="kd">let</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">++</span><span class="nx">counter</span><span class="p">;</span><span class="w"> </span><span class="c1">// (*)</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="nx">alert</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="w"> </span><span class="c1">// *!*2*/!*</span>
</span></code></pre></div>
<p><code>(*)</code> 所在的行是前置形式 <code>++counter</code>，对 <code>counter</code> 做自增运算，返回的是新的值 <code>2</code>。因此 <mark class="critic"> <code>alert</code> 显示的是 <code>2</code> </mark>。</p>
</div>
<div class="tabbed-block">
<div class="language-js highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">counter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="kd">let</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">counter</span><span class="o">++</span><span class="p">;</span><span class="w"> </span><span class="c1">// (*) 将 ++counter 改为 counter++</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="nx">alert</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="w"> </span><span class="c1">// *!*1*/!*</span>
</span></code></pre></div>
<p><code>(*)</code> 所在的行是后置形式 <code>counter++</code>，它同样对 <code>counter</code> 做加法，但是返回的是 <strong>旧值</strong>（做加法之前的值）。因此 <mark class="critic"> <code>alert</code> 显示的是 <code>1</code> </mark>。</p>
</div>
</div>
</div>
<p>总结：</p>
<ul>
<li>
<p>如果自增/自减的值不会被使用，那么两者形式没有区别：</p>
<p><div class="language-js highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">counter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="nx">counter</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="o">++</span><span class="nx">counter</span><span class="p">;</span>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nx">counter</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// 2，以上两行作用相同</span>
</span></code></pre></div>
- 如果我们想要对变量进行自增操作，<strong>并且</strong> 需要立刻使用自增后的值，那么我们需要使用前置形式：</p>
<p><div class="language-js highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">counter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="o">++</span><span class="nx">counter</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// 1</span>
</span></code></pre></div>
- 如果我们想要将一个数加一，但是我们想使用其自增之前的值，那么我们需要使用后置形式：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">counter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nx">counter</span><span class="o">++</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// 0</span>
</span></code></pre></div>
</li>
</ul>
<div class="admonition info">
<p class="admonition-title">自增/自减和其它运算符的对比</p>
<p><code>++/--</code> 运算符同样可以在表达式内部使用。它们的优先级比绝大部分的算数运算符要高。</p>
<p>举个例子：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">counter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">++</span><span class="nx">counter</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// 4</span>
</span></code></pre></div>
<p>与下方例子对比：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">counter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">counter</span><span class="o">++</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// 2，因为 counter++ 返回的是“旧值”</span>
</span></code></pre></div>
<p>尽管从技术层面上来说可行，但是这样的写法会降低代码的可阅读性。在一行上做多个操作 —— 这样并不好。</p>
<p>当阅读代码时，快速的视觉“纵向”扫描会很容易漏掉 <code>counter++</code>，这样的自增操作并不明显。</p>
<p>我们建议用“一行一个行为”的模式：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">counter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">counter</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="nx">counter</span><span class="o">++</span><span class="p">;</span>
</span></code></pre></div>
</div>
<h2 id="_13">逗号运算符<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h2>
<p>逗号运算符能让我们处理多个表达式，使用 <code>,</code> 将它们分开。每个表达式都运行了，但是<mark class="critic"> 只有最后一个的结果会被返回 </mark>。</p>
<p>举个例子：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mf">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">4</span><span class="p">);</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// 7（3 + 4 的结果）</span>
</span></code></pre></div>
<p>这里，第一个表达式 <code>1 + 2</code> 运行了，但是它的结果被丢弃了。随后计算 <code>3 + 4</code>，并且该计算结果被返回。</p>
<div class="admonition info">
<p class="admonition-title">逗号运算符的优先级非常低</p>
<p>请注意逗号运算符的优先级非常低，比 <code>=</code> 还要低，因此上面你的例子中圆括号非常重要。</p>
<p>如果没有圆括号：<code>a = 1 + 2, 3 + 4</code> 会先执行 <code>+</code>，将数值相加得到 <code>a = 3, 7</code>，然后赋值运算符 <code>=</code> 执行 <code>a = 3</code>，然后逗号之后的数值 <code>7</code> 不会再执行，它被忽略掉了。相当于 <code>(a = 1 + 2), 3 + 4</code>。</p>
</div>
<p>为什么我们需要这样一个运算符，它只返回最后一个值呢？</p>
<p>有时候，人们会使用它把几个行为放在一行上来进行复杂的运算。</p>
<p>举个例子：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="c1">// 一行上有三个运算符</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="o">*!*</span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">b</span><span class="o">*</span><span class="err">/!*; a &lt; 10; a++) {</span>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="w"> </span><span class="p">...</span>
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a><span class="p">}</span>
</span></code></pre></div>
<h2 id="_14">字符串比较<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h2>
<p>在比较字符串的大小时，字符串是按字符（母）的 Unicode 编码顺序逐个进行比较的。</p>
<h2 id="_15">不同类型间的比较<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h2>
<p>当对不同类型的值进行比较时，JavaScript 会首先将其转化为数字（number）再判定大小。</p>
<div class="admonition warning">
<p class="admonition-title">一个有趣的现象</p>
<p>有时候，以下两种情况会同时发生：</p>
<ul>
<li>若直接比较两个值，其结果是相等的。</li>
<li>若把两个值转为布尔值，它们可能得出完全相反的结果，即一个是 <code>true</code>，一个是 <code>false</code>。</li>
</ul>
<p>例如：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nb">Boolean</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// false</span>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a>
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a><span class="kd">let</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">;</span>
</span><span id="__span-44-5"><a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nb">Boolean</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// true</span>
</span><span id="__span-44-6"><a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a>
</span><span id="__span-44-7"><a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a><span class="nx">alert</span><span class="p">(</span><span class="nx">a</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">b</span><span class="p">);</span><span class="w"> </span><span class="c1">// true!</span>
</span></code></pre></div>
<p>对于 JavaScript 而言，这种现象其实挺正常的。因为 JavaScript 会把待比较的值转化为数字后再做比较（因此 <code>"0"</code> 变成了 <code>0</code>）。若只是将一个变量转化为 <code>Boolean</code> 值，则会使用其他的类型转换规则。</p>
</div>
<h2 id="_16">严格相等<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h2>
<p>普通的相等性检查 <code>==</code> 存在一个问题，它不能区分出 <code>0</code> 和 <code>false</code>：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// true</span>
</span></code></pre></div>
<p>也同样无法区分空字符串和 <code>false</code>：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// true</span>
</span></code></pre></div>
<p>这是因为在比较不同类型的值时，处于相等判断符号 <code>==</code> 两侧的值会先被转化为数字。空字符串和 <code>false</code> 也是如此，转化后它们都为数字 0。</p>
<p>如果我们需要区分 <code>0</code> 和 <code>false</code>，该怎么办？</p>
<p><strong>严格相等运算符 <code>===</code> 在进行比较时不会做任何的类型转换。</strong></p>
<p>换句话说，如果 <code>a</code> 和 <code>b</code> 属于不同的数据类型，那么 <code>a === b</code> 不会做任何的类型转换而立刻返回 <code>false</code>。</p>
<p>同样的，与“不相等”符号 <code>!=</code> 类似，“严格不相等”表示为 <code>!==</code>。</p>
<p>严格相等的运算符虽然写起来稍微长一些，但是它能够很清楚地显示代码意图，降低你犯错的可能性。</p>
<h2 id="null-undefined">对 null 和 undefined 进行比较<a class="headerlink" href="#null-undefined" title="Permanent link">&para;</a></h2>
<p>当使用 <code>null</code> 或 <code>undefined</code> 与其他值进行比较时，其返回结果常常出乎你的意料。</p>
<dl>
<dt>当使用严格相等 <code>===</code> 比较二者时</dt>
<dd>
<p>它们不相等，因为它们属于不同的类型。</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="kc">undefined</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// false</span>
</span></code></pre></div>
</dd>
<dt>当使用非严格相等 <code>==</code> 比较二者时</dt>
<dd>
<p>JavaScript 存在一个特殊的规则，会判定它们相等。它们俩就像“一对恋人”，<mark class="critic"> 仅仅等于对方而不等于其他任何的值 </mark>（只在非严格相等下成立）。</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">undefined</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// true</span>
</span></code></pre></div>
</dd>
<dt>当使用数学式或其他比较方法 <code>&lt; &gt; &lt;= &gt;=</code> 时：</dt>
<dd><code>null/undefined</code> 会被转化为数字：<mark class="critic"> <code>null</code> 被转化为 <code>0</code>，<code>undefined</code> 被转化为 <code>NaN</code> </mark>。</dd>
</dl>
<p>下面让我们看看，这些规则会带来什么有趣的现象。同时更重要的是，我们需要从中学会如何远离这些特性带来的“陷阱”。</p>
<h3 id="null-vs-0">奇怪的结果：null vs 0<a class="headerlink" href="#null-vs-0" title="Permanent link">&para;</a></h3>
<p>通过比较 <code>null</code> 和 0 可得：</p>
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-49-1">1</a></span>
<span class="normal"><a href="#__codelineno-49-2">2</a></span>
<span class="normal"><a href="#__codelineno-49-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="p">);</span><span class="w">  </span><span class="c1">// (1) false</span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2"></a><span class="hll"><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// (2) false</span>
</span></span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// (3) *!*true*/!*</span>
</span></code></pre></div></td></tr></table></div>
<p>在数学中，如果在最后一行代码显示“<code>null</code> 大于等于 0”为真的情况下，前两行代码中一定会有一个是正确的，然而事实表明它们的结果都是 false。</p>
<p>为什么会出现这种反常结果，这是因为相等性检查 <code>==</code> 和普通比较符 <code>&gt; &lt; &gt;= &lt;=</code> 的代码逻辑是相互独立的。进行值的比较时，<code>null</code> 会被转化为数字，因此它被转化为了 <code>0</code>。这就是为什么（3）中 <code>null &gt;= 0</code> 返回值是 true，（1）中 <code>null &gt; 0</code> 返回值是 false。</p>
<p>另一方面，<code>undefined</code> 和 <code>null</code> 在相等性检查 <code>==</code> 中不会进行任何的类型转换，它们有自己独立的比较规则，所以除了它们之间互等外，不会等于任何其他的值。这就解释了为什么（2）中 <code>null == 0</code> 会返回 false。</p>
<h3 id="undefined">特立独行的 undefined<a class="headerlink" href="#undefined" title="Permanent link">&para;</a></h3>
<p><code>undefined</code> 不应该被与其他值进行比较：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="kc">undefined</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// false (1)</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="kc">undefined</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// false (2)</span>
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="kc">undefined</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// false (3)</span>
</span></code></pre></div>
<p>为何它看起来如此厌恶 0？返回值都是 false！</p>
<p>原因如下：</p>
<ul>
<li><code>(1)</code> 和 <code>(2)</code> 都返回 <code>false</code> 是因为 <code>undefined</code> 在比较中被转换为了 <code>NaN</code>，而 <code>NaN</code> 是一个特殊的数值型值，它与任何值进行比较都会返回 <code>false</code>。</li>
<li><code>(3)</code> 返回 <code>false</code> 是因为这是一个相等性检查，而 <code>undefined</code> 只与 <code>null</code> 相等，不会与其他值相等。</li>
</ul>
<h2 id="_17">条件运算符 '?'<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h2>
<p>语法：
<div class="language-js highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">condition</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">value1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">value2</span><span class="p">;</span>
</span></code></pre></div></p>
<p>计算条件结果，如果结果为真，则返回 <code>value1</code>，否则返回 <code>value2</code>。</p>
<h2 id="_18">或运算寻找第一个真值<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h2>
<div class="language-js highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">value1</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">value2</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">value3</span><span class="p">;</span>
</span></code></pre></div>
<p>或运算符 <code>||</code> 做了如下的事情：</p>
<ul>
<li>从左到右依次计算操作数。</li>
<li>处理每一个操作数时，都将其转化为布尔值。如果结果是 <code>true</code>，就停止计算，返回这个操作数的初始值。</li>
<li>如果所有的操作数都被计算过（也就是，转换结果都是 <code>false</code>），则返回最后一个操作数。</li>
</ul>
<p>返回的值是操作数的初始形式，不会做布尔转换。</p>
<p>换句话说，一个或运算 <code>||</code> 的链，将返回第一个真的值，如果不存在真值，就返回该链的最后一个值。</p>
<p>例如：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// 1（1 是真值）</span>
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a>
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// 1（1 是第一个真值）</span>
</span><span id="__span-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// 1（第一个真值）</span>
</span><span id="__span-53-5"><a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a>
</span><span id="__span-53-6"><a id="__codelineno-53-6" name="__codelineno-53-6" href="#__codelineno-53-6"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="kc">undefined</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// 0（都是假值，返回最后一个值）</span>
</span></code></pre></div>
<p>与“纯粹的、传统的、仅仅处理布尔值的或运算”相比，这个规则就引起了一些很有趣的用法。</p>
<ol>
<li>
<p><strong>获取变量列表或者表达式中的第一个真值。</strong></p>
<p>例如，我们有变量 <code>firstName</code>、<code>lastName</code> 和 <code>nickName</code>，都是可选的（即可以是 undefined，也可以是假值）。</p>
<p>我们用或运算 <code>||</code> 来选择有数据的那一个，并显示出来（如果没有设置，则用 <code>"Anonymous"</code>）：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">firstName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">;</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a><span class="kd">let</span><span class="w"> </span><span class="nx">lastName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">;</span>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a><span class="kd">let</span><span class="w"> </span><span class="nx">nickName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;SuperCoder&quot;</span><span class="p">;</span>
</span><span id="__span-54-4"><a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a>
</span><span id="__span-54-5"><a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nx">firstName</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">lastName</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">nickName</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s2">&quot;Anonymous&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// SuperCoder</span>
</span></code></pre></div>
<p>如果所有变量的值都为假，结果就是 <code>"Anonymous"</code>。</p>
</li>
<li>
<p><strong>短路求值（Short-circuit evaluation）。</strong></p>
<p>或运算符 <code>||</code> 的另一个用途是所谓的“短路求值”。</p>
<p>这指的是，<code>||</code> 对其参数进行处理，直到达到第一个真值，然后立即返回该值，而无需处理其他参数。</p>
<p>如果操作数不仅仅是一个值，而是一个有副作用的表达式，例如变量赋值或函数调用，那么这一特性的重要性就变得显而易见了。</p>
<p>在下面这个例子中，只会打印第二条信息：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="kc">true</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;not printed&quot;</span><span class="p">);</span>
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a><span class="kc">false</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;printed&quot;</span><span class="p">);</span>
</span></code></pre></div>
<p>在第一行中，或运算符 <code>||</code> 在遇到 <code>true</code> 时立即停止运算，所以 <code>alert</code> 没有运行。</p>
<p>有时，人们利用这个特性，只在左侧的条件为假时才执行命令。</p>
</li>
</ol>
<h2 id="_19">与运算寻找第一个假值<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h2>
<p>给出多个参加与运算的值：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">value1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">value2</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">value3</span><span class="p">;</span>
</span></code></pre></div>
<p>与运算 <code>&amp;&amp;</code> 做了如下的事：</p>
<ul>
<li>从左到右依次计算操作数。</li>
<li>在处理每一个操作数时，都将其转化为布尔值。如果结果是 <code>false</code>，就停止计算，并返回这个操作数的初始值。</li>
<li>如果所有的操作数都被计算过（例如都是真值），则返回最后一个操作数。</li>
</ul>
<p>换句话说，与运算返回第一个假值，如果没有假值就返回最后一个值。</p>
<p>上面的规则和或运算很像。区别就是与运算返回第一个假值，而或运算返回第一个真值。</p>
<p>例如：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="c1">// 如果第一个操作数是真值，</span>
</span><span id="__span-57-2"><a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a><span class="c1">// 与运算返回第二个操作数：</span>
</span><span id="__span-57-3"><a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// 0</span>
</span><span id="__span-57-4"><a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="mf">5</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// 5</span>
</span><span id="__span-57-5"><a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a>
</span><span id="__span-57-6"><a id="__codelineno-57-6" name="__codelineno-57-6" href="#__codelineno-57-6"></a><span class="c1">// 如果第一个操作数是假值，</span>
</span><span id="__span-57-7"><a id="__codelineno-57-7" name="__codelineno-57-7" href="#__codelineno-57-7"></a><span class="c1">// 与运算将直接返回它。第二个操作数会被忽略</span>
</span><span id="__span-57-8"><a id="__codelineno-57-8" name="__codelineno-57-8" href="#__codelineno-57-8"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="mf">5</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// null</span>
</span><span id="__span-57-9"><a id="__codelineno-57-9" name="__codelineno-57-9" href="#__codelineno-57-9"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="s2">&quot;no matter what&quot;</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// 0</span>
</span></code></pre></div>
<p>我们也可以在一行代码上串联多个值。查看第一个假值是如何被返回的：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// null</span>
</span></code></pre></div>
<p>如果所有的值都是真值，最后一个值将会被返回：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// 3，最后一个值</span>
</span></code></pre></div>
<div class="admonition info">
<p class="admonition-title">与运算 <code>&amp;&amp;</code> 在或运算 <code>||</code> 之前进行</p>
<p>与运算 <code>&amp;&amp;</code> 的优先级比或运算 <code>||</code> 要高。</p>
<p>所以代码 <code>a &amp;&amp; b || c &amp;&amp; d</code> 跟 <code>&amp;&amp;</code> 表达式加了括号完全一样：<code>(a &amp;&amp; b) || (c &amp;&amp; d)</code>。</p>
</div>
<h2 id="_20">!（非）<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h2>
<p>两个非运算 <code>!!</code> 有时候用来将某个值转化为布尔类型：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="o">!!</span><span class="s2">&quot;non-empty string&quot;</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// true</span>
</span><span id="__span-60-2"><a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="o">!!</span><span class="kc">null</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// false</span>
</span></code></pre></div>
<p>也就是，第一个非运算将该值转化为布尔类型并取反，第二个非运算再次取反。最后我们就得到了一个任意值到布尔值的转化。</p>
<p>有一个略显冗长的方式也可以实现同样的效果 —— 一个内建的 <code>Boolean</code> 函数：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nb">Boolean</span><span class="p">(</span><span class="s2">&quot;non-empty string&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// true</span>
</span><span id="__span-61-2"><a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nb">Boolean</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// false</span>
</span></code></pre></div>
<p>非运算符 <code>!</code> 的优先级在所有逻辑运算符里面最高，所以它总是在 <code>&amp;&amp;</code> 和 <code>||</code> 之前执行。</p>
<div class="admonition note">
<p class="admonition-title">或运算和 alert 的结果是什么？</p>
<p>下面的代码将会输出什么？</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="mf">3</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
</span></code></pre></div>
<p><mark class="critic"> 答案：首先是 <code>1</code>，然后是 <code>2</code>。 </mark></p>
<p>对 <code>alert</code> 的调用没有返回值。或者说返回的是 <code>undefined</code>。</p>
<ol>
<li>第一个或运算 <code>||</code> 对它的左值 <code>alert(1)</code> 进行了计算。这就显示了第一条信息 <code>1</code>。</li>
<li>函数 <code>alert</code> 返回了 <code>undefined</code>，所以或运算继续检查第二个操作数以寻找真值。</li>
<li>第二个操作数 <code>2</code> 是真值，所以执行就中断了。<code>2</code> 被返回，并且被外层的 alert 显示。</li>
</ol>
<p>这里不会显示 <code>3</code>，因为运算没有抵达 <code>alert(3)</code>。</p>
</div>
<div class="admonition note">
<p class="admonition-title">与运算连接的 alert 的结果是什么？</p>
<p>这段代码将会显示什么？</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
</span></code></pre></div>
<p><mark class="critic"> 答案：<code>1</code>，然后 <code>undefined</code>。</mark></p>
<p>调用 <code>alert</code> 返回了 <code>undefined</code>（它只展示消息，所以没有有意义的返回值）。</p>
<p>因此，<code>&amp;&amp;</code> 计算了它左边的操作数（显示 <code>1</code>），然后立即停止了，因为 <code>undefined</code> 是一个假值。<code>&amp;&amp;</code> 就是寻找假值然后返回它，所以运算结束。</p>
</div>
<div class="admonition note">
<p class="admonition-title">或运算、与运算、或运算串联的结果</p>
<p>结果将会是什么？</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="p">);</span>
</span></code></pre></div>
<p><mark class="critic"> 答案：<code>3</code>。</mark></p>
<p>与运算 <code>&amp;&amp;</code> 的优先级比 <code>||</code> 高，所以它第一个被执行。</p>
<p>结果是 <code>2 &amp;&amp; 3 = 3</code>，所以表达式变成了：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a>null || 3 || 4
</span></code></pre></div>
<p>现在的结果就是第一个真值：<code>3</code>。</p>
</div>
<h2 id="_21">空值合并运算符 '??'<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h2>
<div class="admonition info">
<p class="admonition-title">最近新增的特性</p>
<p>这是一个最近添加到 JavaScript 的特性。 旧式浏览器可能需要 polyfills.</p>
</div>
<p>空值合并运算符（nullish coalescing operator）的写法为两个问号 <code>??</code>。</p>
<p>由于它对待 <code>null</code> 和 <code>undefined</code> 的方式类似，所以我们将使用一个特殊的术语对其进行表示。为简洁起见，当一个值既不是 <code>null</code> 也不是 <code>undefined</code> 时，我们将其称为“已定义的（defined）”。</p>
<p><code>a ?? b</code> 的结果是：
- 如果 <code>a</code> 是已定义的，则结果为 <code>a</code>，
- 如果 <code>a</code> 不是已定义的，则结果为 <code>b</code>。</p>
<p>换句话说，如果第一个参数不是 <code>null/undefined</code>，则 <code>??</code> 返回第一个参数。否则，返回第二个参数。</p>
<p>空值合并运算符并不是什么全新的东西。它只是一种获得两者中的第一个“已定义的”值的不错的语法。</p>
<p>我们可以使用我们已知的运算符重写 <code>result = a ?? b</code>，像这样：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="kc">undefined</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">b</span><span class="p">;</span>
</span></code></pre></div>
<p>现在你应该清楚了 <code>??</code> 的作用。让我们来看看它的使用场景吧。</p>
<p><code>??</code> 的常见使用场景是提供默认值。</p>
<p>例如，在这里，如果 <code>user</code> 的值不为 <code>null/undefined</code> 则显示 <code>user</code>，否则显示 <code>匿名</code>：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">user</span><span class="p">;</span>
</span><span id="__span-67-2"><a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a>
</span><span id="__span-67-3"><a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a><span class="nx">alert</span><span class="p">(</span><span class="nx">user</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="s2">&quot;匿名&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// 匿名（user 未定义）</span>
</span></code></pre></div>
<p>在下面这个例子中，我们将一个名字赋值给了 <code>user</code>：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;John&quot;</span><span class="p">;</span>
</span><span id="__span-68-2"><a id="__codelineno-68-2" name="__codelineno-68-2" href="#__codelineno-68-2"></a>
</span><span id="__span-68-3"><a id="__codelineno-68-3" name="__codelineno-68-3" href="#__codelineno-68-3"></a><span class="nx">alert</span><span class="p">(</span><span class="nx">user</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="s2">&quot;匿名&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// John（user 已定义）</span>
</span></code></pre></div>
<p>我们还可以使用 <code>??</code> 序列从一系列的值中选择出第一个非 <code>null/undefined</code> 的值。</p>
<p>假设我们在变量 <code>firstName</code>、<code>lastName</code> 或 <code>nickName</code> 中存储着一个用户的数据。如果用户决定不填写相应的值，则所有这些变量的值都可能是未定义的。</p>
<p>我们想使用这些变量之一显示用户名，如果这些变量的值都是 <code>null/undefined</code>，则显示 "匿名"。</p>
<p>让我们使用 <code>??</code> 运算符来实现这一需求：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-69-1"><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">firstName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-69-2"><a id="__codelineno-69-2" name="__codelineno-69-2" href="#__codelineno-69-2"></a><span class="kd">let</span><span class="w"> </span><span class="nx">lastName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-69-3"><a id="__codelineno-69-3" name="__codelineno-69-3" href="#__codelineno-69-3"></a><span class="kd">let</span><span class="w"> </span><span class="nx">nickName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Supercoder&quot;</span><span class="p">;</span>
</span><span id="__span-69-4"><a id="__codelineno-69-4" name="__codelineno-69-4" href="#__codelineno-69-4"></a>
</span><span id="__span-69-5"><a id="__codelineno-69-5" name="__codelineno-69-5" href="#__codelineno-69-5"></a><span class="c1">// 显示第一个已定义的值：</span>
</span><span id="__span-69-6"><a id="__codelineno-69-6" name="__codelineno-69-6" href="#__codelineno-69-6"></a><span class="o">*!*</span>
</span><span id="__span-69-7"><a id="__codelineno-69-7" name="__codelineno-69-7" href="#__codelineno-69-7"></a><span class="nx">alert</span><span class="p">(</span><span class="nx">firstName</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="nx">lastName</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="nx">nickName</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="s2">&quot;匿名&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// Supercoder</span>
</span><span id="__span-69-8"><a id="__codelineno-69-8" name="__codelineno-69-8" href="#__codelineno-69-8"></a><span class="o">*</span><span class="err">/!*</span>
</span></code></pre></div>
<h2 id="_22">与 || 比较<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h2>
<p>它们之间重要的区别是：
- <code>||</code> 返回第一个 <strong>真</strong> 值。
- <code>??</code> 返回第一个 <strong>已定义的</strong> 值。</p>
<p>换句话说，<code>||</code> 无法区分 <code>false</code>、<code>0</code>、空字符串 <code>""</code> 和 <code>null/undefined</code>。它们都一样 —— 假值（falsy values）。如果其中任何一个是 <code>||</code> 的第一个参数，那么我们将得到第二个参数作为结果。</p>
<p>不过在实际中，我们可能只想在变量的值为 <code>null/undefined</code> 时使用默认值。也就是说，当该值确实未知或未被设置时。</p>
<p>例如，考虑下面这种情况：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-70-1"><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
</span><span id="__span-70-2"><a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a>
</span><span id="__span-70-3"><a id="__codelineno-70-3" name="__codelineno-70-3" href="#__codelineno-70-3"></a><span class="nx">alert</span><span class="p">(</span><span class="nx">height</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mf">100</span><span class="p">);</span><span class="w"> </span><span class="c1">// 100</span>
</span><span id="__span-70-4"><a id="__codelineno-70-4" name="__codelineno-70-4" href="#__codelineno-70-4"></a><span class="nx">alert</span><span class="p">(</span><span class="nx">height</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="mf">100</span><span class="p">);</span><span class="w"> </span><span class="c1">// 0</span>
</span></code></pre></div>
<ul>
<li><code>height || 100</code> 首先会检查 <code>height</code> 是否为一个假值，它是 <code>0</code>，确实是假值。<ul>
<li>所以，<code>||</code> 运算的结果为第二个参数，<code>100</code>。</li>
</ul>
</li>
<li><code>height ?? 100</code> 首先会检查 <code>height</code> 是否为 <code>null/undefined</code>，发现它不是。<ul>
<li>所以，结果为 <code>height</code> 的原始值，<code>0</code>。</li>
</ul>
</li>
</ul>
<p>实际上，高度 <code>0</code> 通常是一个有效值，它不应该被替换为默认值。所以 <code>??</code> 运算得到的是正确的结果。</p>
<h2 id="_23">优先级<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h2>
<p><code>??</code> 运算符的优先级与 <code>||</code> 相同。这意味着，就像 <code>||</code> 一样，空值合并运算符在 <code>=</code> 和 <code>?</code> 运算前计算，但在大多数其他运算（例如 <code>+</code> 和 <code>*</code>）之后计算。</p>
<p>所以我们可能需要在这样的表达式中添加括号：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-71-1"><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-71-2"><a id="__codelineno-71-2" name="__codelineno-71-2" href="#__codelineno-71-2"></a><span class="kd">let</span><span class="w"> </span><span class="nx">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-71-3"><a id="__codelineno-71-3" name="__codelineno-71-3" href="#__codelineno-71-3"></a>
</span><span id="__span-71-4"><a id="__codelineno-71-4" name="__codelineno-71-4" href="#__codelineno-71-4"></a><span class="c1">// 重要：使用括号</span>
</span><span id="__span-71-5"><a id="__codelineno-71-5" name="__codelineno-71-5" href="#__codelineno-71-5"></a><span class="kd">let</span><span class="w"> </span><span class="nx">area</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">height</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="mf">100</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="nx">width</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="mf">50</span><span class="p">);</span>
</span><span id="__span-71-6"><a id="__codelineno-71-6" name="__codelineno-71-6" href="#__codelineno-71-6"></a>
</span><span id="__span-71-7"><a id="__codelineno-71-7" name="__codelineno-71-7" href="#__codelineno-71-7"></a><span class="nx">alert</span><span class="p">(</span><span class="nx">area</span><span class="p">);</span><span class="w"> </span><span class="c1">// 5000</span>
</span></code></pre></div>
<p>否则，如果我们省略了括号，则由于 <code>*</code> 的优先级比 <code>??</code> 高，它会先执行，进而导致错误的结果。</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-72-1"><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a><span class="c1">// 没有括号</span>
</span><span id="__span-72-2"><a id="__codelineno-72-2" name="__codelineno-72-2" href="#__codelineno-72-2"></a><span class="kd">let</span><span class="w"> </span><span class="nx">area</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">height</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="mf">100</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">width</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="mf">50</span><span class="p">;</span>
</span><span id="__span-72-3"><a id="__codelineno-72-3" name="__codelineno-72-3" href="#__codelineno-72-3"></a>
</span><span id="__span-72-4"><a id="__codelineno-72-4" name="__codelineno-72-4" href="#__codelineno-72-4"></a><span class="c1">// ……将这样计算（不符合我们的期望）：</span>
</span><span id="__span-72-5"><a id="__codelineno-72-5" name="__codelineno-72-5" href="#__codelineno-72-5"></a><span class="kd">let</span><span class="w"> </span><span class="nx">area</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">height</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="p">(</span><span class="mf">100</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">width</span><span class="p">)</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="mf">50</span><span class="p">;</span>
</span></code></pre></div>
<h3 id="_24">?? 与 &amp;&amp; 或 || 一起使用<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h3>
<p><mark class="critic"> 出于安全原因，JavaScript 禁止将 <code>??</code> 运算符与 <code>&amp;&amp;</code> 和 <code>||</code> 运算符一起使用，除非使用括号明确指定了优先级。</mark></p>
<p>下面的代码会触发一个语法错误：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-73-1"><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="mf">3</span><span class="p">;</span><span class="w"> </span><span class="c1">// Syntax error</span>
</span></code></pre></div>
<p>这个限制无疑是值得商榷的，它被添加到语言规范中是为了避免人们从 <code>||</code> 切换到 <code>??</code> 时的编程错误。</p>
<p>可以明确地使用括号来解决这个问题：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-74-1"><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mf">1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="mf">3</span><span class="p">;</span><span class="w"> </span><span class="c1">// 正常工作了</span>
</span><span id="__span-74-2"><a id="__codelineno-74-2" name="__codelineno-74-2" href="#__codelineno-74-2"></a>
</span><span id="__span-74-3"><a id="__codelineno-74-3" name="__codelineno-74-3" href="#__codelineno-74-3"></a><span class="nx">alert</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span><span class="w"> </span><span class="c1">// 2</span>
</span></code></pre></div>
<ul>
<li>
<p>空值合并运算符 <code>??</code> 提供了一种从列表中选择第一个“已定义的”值的简便方式。</p>
<p>它被用于为变量分配默认值：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-75-1"><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a><span class="c1">// 当 height 的值为 null 或 undefined 时，将 height 的值设置为 100</span>
</span><span id="__span-75-2"><a id="__codelineno-75-2" name="__codelineno-75-2" href="#__codelineno-75-2"></a><span class="nx">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">height</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="mf">100</span><span class="p">;</span>
</span></code></pre></div>
</li>
<li>
<p><code>??</code> 运算符的优先级非常低，仅略高于 <code>?</code> 和 <code>=</code>，因此在表达式中使用它时请考虑添加括号。</p>
</li>
<li>如果没有明确添加括号，不能将其与 <code>||</code> 或 <code>&amp;&amp;</code> 一起使用。</li>
</ul>
<h2 id="_25">循环<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h2>
<p>基础的循环：<code>while</code>，<code>do..while</code> 和 <code>for(..; ..; ..)</code>。</p>
<p>其他类型的循环：</p>
<ul>
<li>用于遍历对象属性的 <code>for..in</code> 循环。</li>
<li>用于遍历数组和可迭代对象的循环<code>for..of</code> 和<code>iterables</code>。</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>请注意非表达式的语法结构不能与三元运算符 <code>?</code> 一起使用。特别是 <code>break/continue</code> 这样的指令是不允许这样使用的。</p>
<p>例如，我们使用如下代码：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-76-1"><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">i</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">5</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-76-2"><a id="__codelineno-76-2" name="__codelineno-76-2" href="#__codelineno-76-2"></a><span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
</span><span id="__span-76-3"><a id="__codelineno-76-3" name="__codelineno-76-3" href="#__codelineno-76-3"></a><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-76-4"><a id="__codelineno-76-4" name="__codelineno-76-4" href="#__codelineno-76-4"></a><span class="w">  </span><span class="k">continue</span><span class="p">;</span>
</span><span id="__span-76-5"><a id="__codelineno-76-5" name="__codelineno-76-5" href="#__codelineno-76-5"></a><span class="p">}</span>
</span></code></pre></div>
<p>……用问号重写：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-77-1"><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a><span class="p">(</span><span class="nx">i</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">5</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">continue</span><span class="p">;</span><span class="w"> </span><span class="c1">// continue 不允许在这个位置</span>
</span></code></pre></div>
<p>……代码会停止运行，并显示有语法错误。</p>
<p>这是不（建议）使用问号 <code>?</code> 运算符替代 <code>if</code> 语句的另一个原因。</p>
</div>
<h2 id="breakcontinue">break/continue 标签<a class="headerlink" href="#breakcontinue" title="Permanent link">&para;</a></h2>
<p>有时候我们需要一次从多层嵌套的循环中跳出来。</p>
<p>例如，下述代码中我们的循环使用了 <code>i</code> 和 <code>j</code>，从 <code>(0,0)</code> 到 <code>(3,3)</code> 提示坐标 <code>(i, j)</code>：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-78-1"><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">3</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-78-2"><a id="__codelineno-78-2" name="__codelineno-78-2" href="#__codelineno-78-2"></a>
</span><span id="__span-78-3"><a id="__codelineno-78-3" name="__codelineno-78-3" href="#__codelineno-78-3"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">3</span><span class="p">;</span><span class="w"> </span><span class="nx">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-78-4"><a id="__codelineno-78-4" name="__codelineno-78-4" href="#__codelineno-78-4"></a>
</span><span id="__span-78-5"><a id="__codelineno-78-5" name="__codelineno-78-5" href="#__codelineno-78-5"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prompt</span><span class="p">(</span><span class="sb">`Value at coords (</span><span class="si">${</span><span class="nx">i</span><span class="si">}</span><span class="sb">,</span><span class="si">${</span><span class="nx">j</span><span class="si">}</span><span class="sb">)`</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">);</span>
</span><span id="__span-78-6"><a id="__codelineno-78-6" name="__codelineno-78-6" href="#__codelineno-78-6"></a>
</span><span id="__span-78-7"><a id="__codelineno-78-7" name="__codelineno-78-7" href="#__codelineno-78-7"></a><span class="w">    </span><span class="c1">// 如果我想从这里退出并直接执行 alert(&#39;Done!&#39;)</span>
</span><span id="__span-78-8"><a id="__codelineno-78-8" name="__codelineno-78-8" href="#__codelineno-78-8"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-78-9"><a id="__codelineno-78-9" name="__codelineno-78-9" href="#__codelineno-78-9"></a><span class="p">}</span>
</span><span id="__span-78-10"><a id="__codelineno-78-10" name="__codelineno-78-10" href="#__codelineno-78-10"></a>
</span><span id="__span-78-11"><a id="__codelineno-78-11" name="__codelineno-78-11" href="#__codelineno-78-11"></a><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Done!&#39;</span><span class="p">);</span>
</span></code></pre></div>
<p>我们需要提供一种方法，以在用户取消输入时来停止这个过程。</p>
<p>在 <code>input</code> 之后的普通 <code>break</code> 只会打破内部循环。这还不够 —— 标签可以实现这一功能！</p>
<p><strong>标签</strong> 是在循环之前带有冒号的标识符：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-79-1"><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a><span class="nx">labelName</span><span class="o">:</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="p">(...)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-79-2"><a id="__codelineno-79-2" name="__codelineno-79-2" href="#__codelineno-79-2"></a><span class="w">  </span><span class="p">...</span>
</span><span id="__span-79-3"><a id="__codelineno-79-3" name="__codelineno-79-3" href="#__codelineno-79-3"></a><span class="p">}</span>
</span></code></pre></div>
<p><code>break &lt;labelName&gt;</code> 语句跳出循环至标签处：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-80-1"><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a><span class="nx">outer</span><span class="o">:</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">3</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-80-2"><a id="__codelineno-80-2" name="__codelineno-80-2" href="#__codelineno-80-2"></a>
</span><span id="__span-80-3"><a id="__codelineno-80-3" name="__codelineno-80-3" href="#__codelineno-80-3"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">3</span><span class="p">;</span><span class="w"> </span><span class="nx">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-80-4"><a id="__codelineno-80-4" name="__codelineno-80-4" href="#__codelineno-80-4"></a>
</span><span id="__span-80-5"><a id="__codelineno-80-5" name="__codelineno-80-5" href="#__codelineno-80-5"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prompt</span><span class="p">(</span><span class="sb">`Value at coords (</span><span class="si">${</span><span class="nx">i</span><span class="si">}</span><span class="sb">,</span><span class="si">${</span><span class="nx">j</span><span class="si">}</span><span class="sb">)`</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">);</span>
</span><span id="__span-80-6"><a id="__codelineno-80-6" name="__codelineno-80-6" href="#__codelineno-80-6"></a>
</span><span id="__span-80-7"><a id="__codelineno-80-7" name="__codelineno-80-7" href="#__codelineno-80-7"></a><span class="w">    </span><span class="c1">// 如果是空字符串或被取消，则中断并跳出这两个循环。</span>
</span><span id="__span-80-8"><a id="__codelineno-80-8" name="__codelineno-80-8" href="#__codelineno-80-8"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">input</span><span class="p">)</span><span class="w"> </span><span class="k">break</span><span class="w"> </span><span class="nx">outer</span><span class="p">;</span><span class="w"> </span><span class="c1">// (*)</span>
</span><span id="__span-80-9"><a id="__codelineno-80-9" name="__codelineno-80-9" href="#__codelineno-80-9"></a>
</span><span id="__span-80-10"><a id="__codelineno-80-10" name="__codelineno-80-10" href="#__codelineno-80-10"></a><span class="w">    </span><span class="c1">// 用得到的值做些事……</span>
</span><span id="__span-80-11"><a id="__codelineno-80-11" name="__codelineno-80-11" href="#__codelineno-80-11"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-80-12"><a id="__codelineno-80-12" name="__codelineno-80-12" href="#__codelineno-80-12"></a><span class="p">}</span>
</span><span id="__span-80-13"><a id="__codelineno-80-13" name="__codelineno-80-13" href="#__codelineno-80-13"></a>
</span><span id="__span-80-14"><a id="__codelineno-80-14" name="__codelineno-80-14" href="#__codelineno-80-14"></a><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Done!&#39;</span><span class="p">);</span>
</span></code></pre></div>
<p>上述代码中，<code>break outer</code> 向上寻找名为 <code>outer</code> 的标签并跳出当前循环。</p>
<p>因此，控制权直接从 <code>(*)</code> 转至 <code>alert('Done!')</code>。</p>
<p>我们还可以将标签移至单独一行：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-81-1"><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a><span class="nx">outer</span><span class="o">:</span>
</span><span id="__span-81-2"><a id="__codelineno-81-2" name="__codelineno-81-2" href="#__codelineno-81-2"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">3</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
</span></code></pre></div>
<p><code>continue</code> 指令也可以与标签一起使用。在这种情况下，执行跳转到标记循环的下一次迭代。</p>
<div class="admonition warning">
<p class="admonition-title">标签并不允许“跳到”所有位置</p>
<p>标签不允许我们跳到代码的任意位置。</p>
<p>例如，这样做是不可能的：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-82-1"><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a><span class="k">break</span><span class="w"> </span><span class="nx">label</span><span class="p">;</span><span class="w">  </span><span class="c1">// 跳转至下面的 label 处（无效）</span>
</span><span id="__span-82-2"><a id="__codelineno-82-2" name="__codelineno-82-2" href="#__codelineno-82-2"></a>
</span><span id="__span-82-3"><a id="__codelineno-82-3" name="__codelineno-82-3" href="#__codelineno-82-3"></a><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="p">(...)</span>
</span></code></pre></div>
<p><code>break</code> 指令必须在代码块内。从技术上讲，任何被标记的代码块都有效，例如：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-83-1"><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-83-2"><a id="__codelineno-83-2" name="__codelineno-83-2" href="#__codelineno-83-2"></a><span class="w">  </span><span class="c1">// ...</span>
</span><span id="__span-83-3"><a id="__codelineno-83-3" name="__codelineno-83-3" href="#__codelineno-83-3"></a><span class="w">  </span><span class="k">break</span><span class="w"> </span><span class="nx">label</span><span class="p">;</span><span class="w"> </span><span class="c1">// 有效</span>
</span><span id="__span-83-4"><a id="__codelineno-83-4" name="__codelineno-83-4" href="#__codelineno-83-4"></a><span class="w">  </span><span class="c1">// ...</span>
</span><span id="__span-83-5"><a id="__codelineno-83-5" name="__codelineno-83-5" href="#__codelineno-83-5"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">1. 前缀形式 <code>++i</code></label><label for="__tabbed_3_2">2. 后缀形式 <code>i++</code></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><pre><span></span><code><span id="__span-84-1"><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
</span><span id="__span-84-2"><a id="__codelineno-84-2" name="__codelineno-84-2" href="#__codelineno-84-2"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">++</span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">5</span><span class="p">)</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="p">);</span>
</span></code></pre></div>
<p>运行结果：<strong>从 1 到 4</strong></p>
<p>第一个值是 <code>i = 1</code>，因为 <code>++i</code> 首先递增 <code>i</code> 然后返回新值。因此先比较 <code>1 &lt; 5</code> 然后通过 <code>alert</code> 显示 <code>1</code>。</p>
<p>然后按照 <code>2, 3, 4…</code> —— 数值一个接着一个被显示出来。在比较中使用的都是递增后的值，因为 <code>++</code> 在变量前。</p>
<p>最终，<code>i = 4</code> 时，在 <code>++i &lt; 5</code> 的比较中，<code>i</code> 值递增至 <code>5</code>，所以 <code>while(5 &lt; 5)</code> 不符合循环条件，循环停止。所以没有显示 <code>5</code>。</p>
</div>
<div class="tabbed-block">
<div class="language-js highlight"><pre><span></span><code><span id="__span-85-1"><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
</span><span id="__span-85-2"><a id="__codelineno-85-2" name="__codelineno-85-2" href="#__codelineno-85-2"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nx">i</span><span class="o">++</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">5</span><span class="p">)</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="p">);</span>
</span></code></pre></div>
<p>运行结果：<strong>从 1 到 5</strong></p>
<p>第一个值也是 <code>i = 1</code>。后缀形式 <code>i++</code> 递增 <code>i</code> 然后返回 <strong>旧</strong> 值，因此比较 <code>i++ &lt; 5</code> 将使用 <code>i = 0</code>（与 <code>++i &lt; 5</code> 不同）。</p>
<p>但 <code>alert</code> 调用是独立的。这是在递增和比较之后执行的另一条语句。因此它得到了当前的 <code>i = 1</code>。</p>
<p>接下来是 <code>2, 3,4…</code></p>
<p>我们在 <code>i = 4</code> 时暂停，前缀形式 <code>++i</code> 会递增 <code>i</code> 并在比较中使用新值 <code>5</code>。但我们这里是后缀形式 <code>i++</code>。因此，它将 <code>i</code> 递增到 <code>5</code>，但返回旧值。因此实际比较的是 <code>while(4 &lt; 5)</code> —— true，程序继续执行 <code>alert</code>。</p>
<p><code>i = 5</code> 是最后一个值，因为下一步比较 <code>while(5 &lt; 5)</code> 为 false。</p>
</div>
</div>
</div>
<h2 id="switch">"switch" 语句<a class="headerlink" href="#switch" title="Permanent link">&para;</a></h2>
<p><strong>如果没有 <code>break</code>，程序将不经过任何检查就会继续执行下一个 <code>case</code>。</strong></p>
<p>无 <code>break</code> 的例子：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-86-1"><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>
</span><span id="__span-86-2"><a id="__codelineno-86-2" name="__codelineno-86-2" href="#__codelineno-86-2"></a>
</span><span id="__span-86-3"><a id="__codelineno-86-3" name="__codelineno-86-3" href="#__codelineno-86-3"></a><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-86-4"><a id="__codelineno-86-4" name="__codelineno-86-4" href="#__codelineno-86-4"></a><span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="mf">3</span><span class="o">:</span>
</span><span id="__span-86-5"><a id="__codelineno-86-5" name="__codelineno-86-5" href="#__codelineno-86-5"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;Too small&#39;</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-86-6"><a id="__codelineno-86-6" name="__codelineno-86-6" href="#__codelineno-86-6"></a><span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="mf">4</span><span class="o">:</span>
</span><span id="__span-86-7"><a id="__codelineno-86-7" name="__codelineno-86-7" href="#__codelineno-86-7"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;Exactly!&#39;</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-86-8"><a id="__codelineno-86-8" name="__codelineno-86-8" href="#__codelineno-86-8"></a><span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="mf">5</span><span class="o">:</span>
</span><span id="__span-86-9"><a id="__codelineno-86-9" name="__codelineno-86-9" href="#__codelineno-86-9"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;Too big&#39;</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-86-10"><a id="__codelineno-86-10" name="__codelineno-86-10" href="#__codelineno-86-10"></a><span class="w">  </span><span class="k">default</span><span class="o">:</span>
</span><span id="__span-86-11"><a id="__codelineno-86-11" name="__codelineno-86-11" href="#__codelineno-86-11"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="s2">&quot;I don&#39;t know such values&quot;</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-86-12"><a id="__codelineno-86-12" name="__codelineno-86-12" href="#__codelineno-86-12"></a><span class="p">}</span>
</span></code></pre></div>
<p>在上面的例子中我们会看到连续执行的三个 <code>alert</code>：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-87-1"><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;Exactly!&#39;</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-87-2"><a id="__codelineno-87-2" name="__codelineno-87-2" href="#__codelineno-87-2"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;Too big&#39;</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-87-3"><a id="__codelineno-87-3" name="__codelineno-87-3" href="#__codelineno-87-3"></a><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="s2">&quot;I don&#39;t know such values&quot;</span><span class="w"> </span><span class="p">);</span>
</span></code></pre></div>
<div class="admonition info">
<p class="admonition-title">任何表达式都可以成为 <code>switch/case</code> 的参数</p>
<p><div class="language-js highlight"><pre><span></span><code><span id="__span-88-1"><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="p">;</span>
</span><span id="__span-88-2"><a id="__codelineno-88-2" name="__codelineno-88-2" href="#__codelineno-88-2"></a><span class="kd">let</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
</span><span id="__span-88-3"><a id="__codelineno-88-3" name="__codelineno-88-3" href="#__codelineno-88-3"></a>
</span><span id="__span-88-4"><a id="__codelineno-88-4" name="__codelineno-88-4" href="#__codelineno-88-4"></a><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="o">+</span><span class="nx">a</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-88-5"><a id="__codelineno-88-5" name="__codelineno-88-5" href="#__codelineno-88-5"></a>
</span><span id="__span-88-6"><a id="__codelineno-88-6" name="__codelineno-88-6" href="#__codelineno-88-6"></a><span class="k">case</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="o">:</span>
</span><span id="__span-88-7"><a id="__codelineno-88-7" name="__codelineno-88-7" href="#__codelineno-88-7"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;this runs, because +a is 1, exactly equals b+1&quot;</span><span class="p">);</span>
</span><span id="__span-88-8"><a id="__codelineno-88-8" name="__codelineno-88-8" href="#__codelineno-88-8"></a><span class="w">    </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-88-9"><a id="__codelineno-88-9" name="__codelineno-88-9" href="#__codelineno-88-9"></a><span class="k">default</span><span class="o">:</span>
</span><span id="__span-88-10"><a id="__codelineno-88-10" name="__codelineno-88-10" href="#__codelineno-88-10"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;this doesn&#39;t run&quot;</span><span class="p">);</span>
</span><span id="__span-88-11"><a id="__codelineno-88-11" name="__codelineno-88-11" href="#__codelineno-88-11"></a><span class="p">}</span>
</span></code></pre></div>
这里 <code>+a</code> 返回 <code>1</code>，这个值跟 <code>case</code> 中 <code>b + 1</code> 相比较，然后执行对应的代码。</p>
</div>
<div class="admonition warning">
<p class="admonition-title">switch相等是严格相等</p>
<p>强调一下，这里的相等是严格相等。被比较的值必须是相同的类型才能进行匹配。</p>
<p>比如，我们来看下面的代码：</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-89-1"><a id="__codelineno-89-1" name="__codelineno-89-1" href="#__codelineno-89-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">arg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prompt</span><span class="p">(</span><span class="s2">&quot;Enter a value?&quot;</span><span class="p">)</span>
</span><span id="__span-89-2"><a id="__codelineno-89-2" name="__codelineno-89-2" href="#__codelineno-89-2"></a><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">arg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-89-3"><a id="__codelineno-89-3" name="__codelineno-89-3" href="#__codelineno-89-3"></a><span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;0&#39;</span><span class="o">:</span>
</span><span id="__span-89-4"><a id="__codelineno-89-4" name="__codelineno-89-4" href="#__codelineno-89-4"></a><span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;1&#39;</span><span class="o">:</span>
</span><span id="__span-89-5"><a id="__codelineno-89-5" name="__codelineno-89-5" href="#__codelineno-89-5"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;One or zero&#39;</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-89-6"><a id="__codelineno-89-6" name="__codelineno-89-6" href="#__codelineno-89-6"></a><span class="w">    </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-89-7"><a id="__codelineno-89-7" name="__codelineno-89-7" href="#__codelineno-89-7"></a>
</span><span id="__span-89-8"><a id="__codelineno-89-8" name="__codelineno-89-8" href="#__codelineno-89-8"></a><span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;2&#39;</span><span class="o">:</span>
</span><span id="__span-89-9"><a id="__codelineno-89-9" name="__codelineno-89-9" href="#__codelineno-89-9"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;Two&#39;</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-89-10"><a id="__codelineno-89-10" name="__codelineno-89-10" href="#__codelineno-89-10"></a><span class="w">    </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-89-11"><a id="__codelineno-89-11" name="__codelineno-89-11" href="#__codelineno-89-11"></a>
</span><span id="__span-89-12"><a id="__codelineno-89-12" name="__codelineno-89-12" href="#__codelineno-89-12"></a><span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="mf">3</span><span class="o">:</span>
</span><span id="__span-89-13"><a id="__codelineno-89-13" name="__codelineno-89-13" href="#__codelineno-89-13"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;Never executes!&#39;</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-89-14"><a id="__codelineno-89-14" name="__codelineno-89-14" href="#__codelineno-89-14"></a><span class="w">    </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-89-15"><a id="__codelineno-89-15" name="__codelineno-89-15" href="#__codelineno-89-15"></a><span class="w">  </span><span class="k">default</span><span class="o">:</span>
</span><span id="__span-89-16"><a id="__codelineno-89-16" name="__codelineno-89-16" href="#__codelineno-89-16"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;An unknown value&#39;</span><span class="w"> </span><span class="p">)</span>
</span><span id="__span-89-17"><a id="__codelineno-89-17" name="__codelineno-89-17" href="#__codelineno-89-17"></a><span class="p">}</span>
</span></code></pre></div>
<ol>
<li>在 <code>prompt</code> 对话框输入 <code>0</code>、<code>1</code>，第一个 <code>alert</code> 弹出。</li>
<li>输入 <code>2</code>，第二个 <code>alert</code> 弹出。 </li>
<li>但是输入 <code>3</code>，因为 <code>prompt</code> 的结果是字符串类型的 <code>"3"</code>，不严格相等 <code>===</code> 于数字类型的 <code>3</code>，所以 <code>case 3</code> 不会执行！因此 <code>case 3</code> 部分是一段无效代码。所以会执行 <code>default</code> 分支。</li>
</ol>
</div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../%E7%AC%AC%E4%B8%80%E7%AB%A0%20JavaScript%20%E7%AE%80%E4%BB%8B/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 第一章 JavaScript 简介" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                第一章 JavaScript 简介
              </div>
            </div>
          </a>
        
        
          
          <a href="../../JavaScript%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/%E5%88%9D%E7%BA%A7%E7%89%87%E6%AE%B5/" class="md-footer__link md-footer__link--next" aria-label="Next: 入门级" rel="next">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                入门级
              </div>
            </div>
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 - 2030 詹纬
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>